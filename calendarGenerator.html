<!DOCTYPE html>
<html lang="en">
<head>
    <title>Dynamic Calendar</title>
</head>
<body>
    <link rel="stylesheet" href="style.css">
    <div id="calendar">
        <div id="calendar-header">
            <button class='calendar-btn' id="prev">&lt;</button>
            <div id="calendarHeader"></div>
            <button class='calendar-btn' id="next">&gt;</button>
        </div>

    <div id="mainContent"></div>

    </div>
    <script>
        let d = new Date();
        let day = d.getDay();
        let _currentMonth = d.getMonth();
        let _currentDay = d.getDay();
        let _currentYear = d.getFullYear();
        const tmpPreviousCalendarMonth = document.getElementById('prev');
        const tmpNextCalendarMonth = document.getElementById('next');
        const tmpMain = document.getElementById('mainContent');
        const _daysOfTheWeek = ( 
                    ["Sun",
                    "Mon",
                    "Tue", 
                    "Wed", 
                    "Thu",
                    "Fri", 
                    "Sat"
                ]);
                const _monthsOfTheYear = (
                        ["January", 
                        "February", 
                        "March", 
                        "April", 
                        "May", 
                        "June",
                        "July", 
                        "August", 
                        "September", 
                        "October",
                        "November", 
                        "December"
                    ]);
                    
        let table = "<table>";
        
        function daysInCalendarMonth(pYear, pMonth)
		{
			return new Date(pYear, pMonth + 1, 0).getDate();
		}

        let daysInMonth = daysInCalendarMonth(_currentYear, _currentMonth);
        let firstWeekDay = new Date(_currentYear, _currentMonth, 1).getDay();
        let daysinLastMonth = daysInCalendarMonth(_currentYear, _currentMonth-1);


        function generateCalendar(pCurrentYear, pCurrentMonth)
        {
            let currentWeek = 0;
            let nextMonthDay = 1;
            let currentDay = 1;
            let lastMonthWeekDayEnd = 6-firstWeekDay;
            let moreDays = true;
            table = "<table>";
                table += "<tr>";
                table += "<th>";
            for ( i = 0; i < 7; i++)
            {
                table += "<td class='day'>" + _daysOfTheWeek[i] + "</td>";
            }
            table += "</th>";
            table += "</tr>";
            while (moreDays)
            {
                table += "<tr>";
                table += "<th>";
                table += "<td class='day'>" + currentDay + "</td>";
                currentDay++;
                table += "<td class='day'>" + currentDay + "</td>";
                currentDay++;
                table += "<td class='day'>" + currentDay + "</td>";
                currentDay++;
                table += "<td class='day'>" + currentDay + "</td>";
                currentDay++;
                table += "<td class='day'>" + currentDay + "</td>";
                currentDay++;
                table += "<td class='day'>" + currentDay + "</td>";
                currentDay++;
                table += "<td class='day'>" + currentDay + "</td>";
                table += "</th>";
                table += "</tr>";
                if (currentDay = 7)
                {
                    moreDays = false;
                }
                /*
                for ( i = 0; i < 7; i++ )
                {
                    // if it's the first row, print out the day of the week index i
                    if (currentWeek == 0)
                    {
                        table += "<th class='daysOfWeek'>" + _daysOfTheWeek[i] + "</th>";
                    }
                    // if it's the second row and i is less than the first weekday of the month, print the last days of the last month 
                    else if (currentWeek == 1 && i < lastMonthWeekDayEnd)
                    {
                        let firstThreeDays = daysinLastMonth-2+i;
                        table += "<td class='day'>" + firstThreeDays + "</td>";
                    }
                    // if it's the second row and i is greater than the first wekday of the month, print out the current day of the month and increment by 1
                    else if (currentWeek == 1 && i >= lastMonthWeekDayEnd)
                    {
                        table += "<td class='day'>" + currentDay + "</td>";
                        currentDay++;
                    }
                    // if the current day is greater than the number of days in the month, print the days in the next month and increment by 1
                    else if (currentDay > daysInCalendarMonth(pCurrentYear, pCurrentMonth))
                    {
                        table += "<td class='day'>" + nextMonthDay + "</td>";
                        nextMonthDay++;
                    }
                    // if none of the above conditions are met, print the current day and increment by 1
                    else
                    {
                        table += "<td class='day'>" + currentDay + "</td>";
                        currentDay++
                    }
                
                }
                */
                table += "</tr>";
                if (currentDay > daysInCalendarMonth(pCurrentYear, pCurrentMonth))
                {
                    moreDays = false;
                }
                currentWeek++;
            }
                table += "</table>";
                tmpMain.innerHTML = table;
                document.getElementById("calendarHeader").innerHTML = "<h1 class='dateHeader'>" + _monthsOfTheYear[pCurrentMonth] + " " + pCurrentYear + "</h1>";
        }

        tmpPreviousCalendarMonth.addEventListener('click', toPreviousMonth);
        tmpNextCalendarMonth.addEventListener('click', toNextMonth);

        function toPreviousMonth()
        {
                if (_currentMonth == 0)
                {
                    _currentYear--;
                    _currentMonth = 11;
                }
                else
                {
                    _currentMonth--;
                }
                generateCalendar(_currentYear, _currentMonth);
                return true;
        }

        function toNextMonth()
        {
                if (_currentMonth == 11)
                {
                    _currentYear++;
                    _currentMonth = 0;
                }
                else
                {
                    _currentMonth++;
                }
                generateCalendar(_currentYear, _currentMonth);
                return true;
        }
        generateCalendar(_currentYear, _currentMonth);
    </script>
</body>
</html>